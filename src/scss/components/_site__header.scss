@use 'sass:map';

.site-header {
	position: relative;

	.header-content {
		padding-left: get-spacing( 0.5 );
		padding-right: get-spacing( 0.5 );

		@media ( min-width: bp(sm) ) {
			padding-left: get-spacing();
			padding-right: get-spacing();
		}
	}

	.menu__inner-toggle {
		display: block;
	}

	.nav--primary {
		display: flex;
		justify-content: space-between;
		position: absolute;
		width: 100%;
		z-index: 50;
		padding-left: get-spacing( 0.5 );
		padding-right: get-spacing( 0.5 );
		@media ( min-width: bp(sm) ) {
			padding-left: get-spacing();
			padding-right: get-spacing();
		}
		transition-property: top;
		transition-timing-function: cubic-bezier( 0.25, 1, 0.5, 1 );
		transition-duration: 0.27s;

		&::before {
			content: '';
			width: 100%;
			// height: 10rem;
			position: absolute;
			top: 0;
			left: 0;
			z-index: -1;
		}

		.main-navigation {
			padding: get-spacing( 0.5 );
			width: 100vw;
			height: 100vh;
			position: fixed;
			z-index: 50;
			top: 0;
			right: -100vw;
			transition-property: right;
			transition-timing-function: ease-out;
			transition-duration: 0.25s;

			.menu-item {
				a {
					&::after {
						content: '';
						position: absolute;
						bottom: 0;
						left: 0;
						width: 0;
						transition-duration: 0.25s;
						transition-timing-function: ease-out;
						transition-property: width;
					}
					&:focus::after,
					&:hover::after {
						width: 100%;
					}
				}
			}

			.admin-bar & {
				top: 46px;
			}

			&.open {
				right: 0;
			}
		}

		.menu__inner-toggle,
		.menu__toggle {
			border: none;
			position: absolute;
			top: get-spacing( 0.75 );
			right: get-spacing();
			width: get-spacing();
			height: get-spacing();
			padding: 0.25rem;
			outline: none;
			cursor: pointer;
			&:hover,
			&:focus {
				text-decoration: underline;
			}
			&::after {
				content: '☰';
				font-size: map.get( $font-sizes, h3 );
				display: relative;
				top: 50%;
				left: 50%;
				transform: translate( -50%, -50% );
				line-height: 0.5;
			}

			@media ( min-width: bp(sm) ) {
				display: none;
			}
		}

		.menu__inner-toggle {
			top: get-spacing( 0.5 );
			left: get-spacing( 0.5 );
			&::after {
				content: '×';
			}
		}

		.navigation-menu {
			.menu {
				margin: 0;
				padding: get-spacing() 0 0 0;
				list-style: none;
				text-align: right;
				width: auto;
				display: inline-block;
			}
			.menu-item {
				display: inline-block;
				vertical-align: top;
				text-align: right;

				a {
					padding: 1.5rem 0 0.5rem 0;
					position: relative;
					display: block;
					@include display-font;
					font-size: map.get( $font-sizes, h4 );
					text-decoration: none;
				}
			}
		}
	}

	.wp-block-cover__inner-container {
		position: absolute;
		bottom: 0;
	}

	.page[class*='page-urz'] &,
	.page[class*='home'] & {
		.header-content {
		}

		&::after {
			content: '';
			position: absolute;
			left: 0;
			width: 100vw;
			bottom: 0;
			height: 100vh;
		}
	}

	@media ( min-width: bp(sm) ) {
		.menu__inner-toggle {
			display: none;
		}

		.admin-bar & {
			.nav--primary {
				.main-navigation {
					top: 0;
				}
			}
		}

		.nav--primary {
			li:not( :first-child ) {
				margin-left: 2rem;
			}

			.main-navigation {
				display: block;
				position: relative;
				width: auto;
				height: auto;
				left: auto;
				right: auto;
				padding: 0;

				.menu-item {
					display: inline-block;
					a {
						padding: 2rem 0 0.5rem 0;
					}
					&.current_page_item {
						a {
							&::after {
								width: 100%;
							}
						}
					}
				}
			}

			.navigation-menu {
				.menu {
					padding: 0 0 0 0;
				}
			}
		}

		&.has-notice.out-of-view {
			.nav--primary {
				top: 0;
			}
		}
	}
}

.site-header.out-of-view {
	.nav--primary {
		position: fixed;
		top: 0;

		@media ( min-width: bp(sm) ) {
			.admin-bar & {
				top: 32px;
			}
		}

		.menu__toggle {
			right: get-spacing( 0.325 );
			top: get-spacing( 0.325 );
			width: get-spacing( 0.75 );
			height: get-spacing( 0.75 );
		}

		&::before {
			content: '';
			width: 100%;
			height: 4.5rem;
			position: absolute;
			top: 0;
			left: 0;
			z-index: -1;
		}

		.navigation-menu {
			top: 0;
			.menu-item {
				> a {
					padding: 1.5rem 0 0.25rem 0;
					position: relative;
					display: block;
					@include display-font;
					font-size: map.get( $font-sizes, h5 );
				}
			}
		}
	}
}
